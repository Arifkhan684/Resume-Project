<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <style>
        * {
            font-family: "General Sans";
        }

        .checkoutLayout {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 50px;
            padding: 20px;
        }

        .checkoutLayout .right {
            background-color: #aaa9a9;
            border-radius: 20px;
            padding: 40px;
            color: #fff;
        }

        .checkoutLayout .right .form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            border-bottom: 1px solid #fff;
            padding-bottom: 20px;
        }

        .checkoutLayout .form h1,
        .checkoutLayout .form .group:nth-child(-n+3) {
            grid-column: 1 / 3;
        }

        .checkoutLayout .form input,
        .checkoutLayout .form select {
            width: 100%;
            padding: 10px 20px;
            box-sizing: border-box;
            border-radius: 20px;
            margin-top: 10px;
            border: none;
            color: #000;
        }

        .checkoutLayout .right .return .row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .checkoutLayout .right .return .row div:nth-child(2) {
            font-weight: bold;
            font-size: x-large;
        }

        .buttonCheckout {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 20px;
            background-color: #000;
            margin-top: 20px;
            font-weight: bold;
            color: #fff;
        }

        .returnCart h1 {
            border-top: 1px solid #eee;
            padding: 20px 0;
        }

        .returnCart .list .item img {
            height: 80px;
        }

        .returnCart .list .item {
            display: grid;
            grid-template-columns: 80px 1fr 100px 80px;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 0 10px;
            box-shadow: 0 10px 20px #5555;
            border-radius: 20px;
        }

        .returnCart .list .item .name,
        .returnCart .list .item .returnPrice {
            font-size: large;
            font-weight: bold;
        }

        .shpi {
            opacity: 60%;
        }

        /* .quantity {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .quantity button {
      background-color: #49D8B9;
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: bold;
    }

    .quantity span {
      font-size: 18px;
      min-width: 20px;
      text-align: center;
    } */

        .returnCart .list .item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
        }

        .returnCart .list .item .info {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .returnCart .list .item .quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .returnCart .list .item .quantity button {
            background-color: #49D8B9;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="checkoutLayout">
            <div class="returnCart">
                <h1>List Product in Cart</h1>
                <div class="list"></div>
            </div>

            <div class="right">
                <h1>Checkout</h1>
                <div class="form">

                    <div class="group">
                        <label for="name">Full Name</label>
                        <input type="text" id="name" placeholder="write...." required>
                    </div>
                    <div class="group">
                        <label for="email">Email id</label>
                        <input type="text" id="email">
                    </div>
                    <div class="group">
                        <label for="phone">Phone Number</label>
                        <input type="text" id="phone">
                    </div>
                    <div class="group">
                        <label for="address">Address</label>
                        <input type="text" id="address">
                    </div>
                    <div class="group">
                        <label for="address">Pincode</label>
                        <input type="text" id="address">
                    </div>
                    <div class="group">
                        <label for="country">Country</label>
                        <select id="country">
                            <option value="">Choose..</option>
                            <option value="kingdom">Kingdom</option>
                        </select>
                    </div>
                    <div class="group">
                        <label for="city">City</label>
                        <select id="city">
                            <option value="">Choose..</option>
                            <option value="london">London</option>
                        </select>
                    </div>
                </div>

                <div class="return">
                    <div class="row">
                        <div>Total Quantity</div>
                        <div class="totalQuantity">0</div>
                    </div>
                    <div class="row">
                        <div>Total Price</div>
                        <div class="totalPrice">$0</div>
                    </div>
                    <div class="row shpi">
                        <div>Shipping Price</div>
                        <div>$50</div>
                    </div>
                </div>
                <button class="buttonCheckout">Pytm now</button>
            </div>
        </div>
    </div>

    <script>
        let listCart = [];

        function checkCart() {
            listCart = JSON.parse(localStorage.getItem('cartItems') || '[]');
        }

        function addCartToHTML() {
            let listCartHTML = document.querySelector('.returnCart .list');
            listCartHTML.innerHTML = '';

            let totalQuantityHTML = document.querySelector('.totalQuantity');
            let totalPriceHTML = document.querySelector('.totalPrice');
            let totalQuantity = 0;
            let totalPrice = 0;

            if (listCart) {
                listCart.forEach(product => {
                    if (product) {
                        let newCart = document.createElement('div');
                        newCart.classList.add('item');
                        newCart.innerHTML = `
            <img src="${product.image}">
            <div class="info">
              <div class="name">${product.name} (${product.size})</div>
              <div class="price">$${product.price}/1 product</div>
            </div>
            <div class="quantity">
              <button class="decrease" data-id="${product.id}">-</button>
              <span>${product.quantity}</span>
              <button class="increase" data-id="${product.id}">+</button>
            </div>
            <div class="returnPrice">$${(product.price * product.quantity).toFixed(2)}</div>`;
                        listCartHTML.appendChild(newCart);

                        totalQuantity += product.quantity;
                        totalPrice += product.price * product.quantity;
                    }
                });
            }

            totalQuantityHTML.innerText = totalQuantity;
            totalPriceHTML.innerText = '$' + totalPrice.toFixed(2);
        }

        // Handle quantity increase/decrease
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('increase') || e.target.classList.contains('decrease')) {
                const id = e.target.getAttribute('data-id');
                const index = listCart.findIndex(p => p.id === id);

                if (index !== -1) {
                    if (e.target.classList.contains('increase')) {
                        listCart[index].quantity += 1;
                    } else if (e.target.classList.contains('decrease')) {
                        if (listCart[index].quantity > 1) {
                            listCart[index].quantity -= 1;
                        } else {
                            listCart.splice(index, 1); // Remove item if quantity becomes 0
                            let count = parseInt(localStorage.getItem('cartCount') || '0');
                            count--;
                            localStorage.setItem('cartCount', count);
                        }
                    }

                    localStorage.setItem('cartItems', JSON.stringify(listCart));
                    addCartToHTML();
                    updateCartDisplay(); // Update cart icon count
                }
            }
        });

        // Update cart display (for consistency with nav and product pages)
        function updateCartDisplay() {
            const count = parseInt(localStorage.getItem('cartCount') || '0');
            const cartCountElem = document.getElementById('cart-count');
            if (cartCountElem) {
                cartCountElem.textContent = count;
                cartCountElem.style.display = count > 0 ? 'inline-block' : 'none';
            }
        }

        // Initialize cart on page load
        document.addEventListener('DOMContentLoaded', () => {
            checkCart();
            addCartToHTML();
            updateCartDisplay();
        });
    </script>
</body>

</html>